{"mappings":"2vBAEIA,EAAO,GAoBXC,WAlBkBC,WACZC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BL,EAAQG,EAAKE,IAAMH,EAAMC,EAAKE,KAelCE,WAXiBC,OACXC,EAAWT,EAAQQ,MAEP,MAAZC,EAAgB,MAAA,IACRC,MAAK,oCAAuCF,UAGjDC,MCnBTE,EAAA,SAAAC,SAAsCC,KAAKC,MAAK,uICGnCC,EAAK,CACdC,KAAI,GACJC,UAAW,EACXC,YCJyB,GDKzBC,MAAK,GACLC,KAAM,EACNC,SAAU,GAGDC,EAAUC,eAAkBC,EAAWT,EAAMM,kBAE9CI,EAAG,wEAAsBD,IAC1BT,EAAMI,QAAOM,EAAG,GAAMA,QAAUV,EAAMI,gBACnCO,QEPMH,eAAkBE,aAExBE,QAAYC,QAAQC,KAAI,CAAEC,MAAML,IAVdM,EDAL,OCCZH,SAAO,SAAUI,EAAGC,GAC3BC,YAAU,KACND,EAAM,IAAKvB,MAAK,wCAAyCqB,eACtD,IAAJA,SAOGL,QAAaC,EAAIQ,WACnBR,EAAIS,GAAE,MAAA,IAAY1B,MAAK,6CACpBgB,QACFW,SACCA,EAfM,IAAYN,EFeLO,CAAQb,MACL,IAAnBC,EAAKT,UAAe,MAAA,IAAYP,MAAK,6CACxCK,EAAMC,KAAOU,EAAKV,KAClBD,EAAME,UAAYS,EAAKT,UACvBF,EAAMK,KAAOmB,SAAUC,KAAKC,KAAM1B,EAAME,UAAYF,EAAMG,oBACrDmB,SAAeA,+FGnBG,IAC3BK,EAAY,cAwBPC,EAAWlB,aACLA,GAAKmB,QAAO,wCAAA,MAA8C,IAczEC,oBApCOH,IACHA,2BAQUhC,YACHoC,OACHC,GAAO,GAASD,EAAIE,OAAOC,MAAK,qCAEhCF,EAAO,OACFJ,EAAWI,EAAQ,cAbhBG,IAGPR,sECRLS,iBAMKC,EAAQC,MACF,KAATA,EAAS,MAAA,QAITC,EAAyC,MAA9BD,EAAUA,EAAU/C,OAAS,GAAa+C,EAAUE,MAAM,EAAGF,EAAU/C,OAAS,GAAK+C,EAChGG,EAAaF,EAASG,YAAW,YACf,IAAfD,EAAiB,IAASF,EAASC,MAAM,EAAGC,YAG5CE,EAASC,EAAMC,MAClBD,IAASC,EAAE,MAAA,OAIXC,EAAYF,EAAKG,MAAK,KAEX,MAAXD,EAAU,IACZA,EAAUE,YAUR1D,EACA2D,EARAC,EAAUL,EAAGE,MAAK,SAET,MAATG,EAAQ,IACVA,EAAQF,QAOL1D,EAAI,GAAIA,EAAI4D,EAAQ3D,QAAUD,EAAIwD,EAAUvD,SAA2B,MAAhB0D,EAAsB3D,IAC5EwD,EAAUxD,KAAO4D,EAAQ5D,KAC3B2D,EAAe3D,OAMf6D,EAAK,OAEJ7D,EAAI,EAAGA,EAAIwD,EAAUvD,OAAS0D,EAAc3D,IAC/C6D,EAAMC,KAAI,aAKRF,EAAQ3D,OAAS0D,GACnBE,EAAMC,KAAKC,MAAMF,EAAOD,EAAQV,MAAMS,IAGjCE,EAAMG,KAAI,KAvDnBC,EAAAC,QAAc,SAAaC,EAAQC,UAC1Bf,EAASN,EAAOsB,EAASF,IAAME,EAAYD,KAyDpDH,EAAAC,QAAeI,SAAWvB,EAC1BkB,EAAAC,QAAeK,UAAYlB,KC/D3BmB,EAAiBlE,EAAA,SAAAmE,eAAyCnE,EAAA,QAAA,CAA0B,QAAQ,aC0C5FoE,QAxCIC,WAAaC,SAASC,cAAa,cACnCF,QAAO,+DACPA,MAEAA,OAAOtD,OACDA,GAAQyD,MAAMC,QAAQ1D,IAAyB,IAAhBA,EAAKpB,OAAY,OAAA+E,KAAeC,mBAC5DC,MAAQ7D,QACP8D,EAAMH,KAAQI,uBACfC,cACAC,eAAeC,mBAAkB,aAAeJ,GAGzDR,cACOW,eAAeE,UAAS,QACxBC,WAAWD,UAAS,GAG3Bb,qBAISU,cACAI,WAAWF,mBAAkB,aAJtB,oFAOhBZ,YAAYe,EAAOV,KAAQU,eAClBP,EAAM,yEAGKQ,EAAAnB,uDAERkB,uCAGJL,cACAI,WAAWF,mBAAkB,aAAeJ,SCdxDS,EAAkC,kBAtBPlB,EACvBC,eAAiBC,SAASC,cAAa,aAEvCF,8BACgBO,MAAMW,IAAGb,KAAMc,uBAAuB9B,KAAI,IAG1DW,sBAAsBoB,mGAGmBA,EAAM5F,uCACnB4F,EAAMC,sBAAsBD,EAAME,uDAE5CF,EAAME,0CAKxBtB,sBAAsBuB,GAASC,OAAOC,iBAAgB,OAASF,SCWnEG,EAAoC,kBA7BP3B,EACzBC,eAAiBC,SAASC,cAAa,eAEvCF,sBACQ2B,EAAI,WACAtG,EAAE,EAAGA,GAACgF,KAAOE,MAAMnE,OAAQf,EAC/BsG,GAAItB,KAASuB,uBAAuBvG,UAEjCsG,EAGX3B,uBAAuB5D,6CAEMA,oDACfA,sCAKd4D,yBAAyBuB,QAChBZ,eAAec,iBAAgB,SAAQ,SAAWI,SAC7CC,EAAOD,EAAEE,OAAOC,QAAO,QACzBF,GACJP,GAAQO,EAAIG,QAAQ7F,eCDhC8F,EAAgC,kBArBPnC,EACrBC,eAAiBC,SAASC,cAAa,WACvCF,QAAO,4CAEPA,iBACU7D,EAAKkE,KAAQM,eAAeT,cAAa,kBAAmBiC,kBAC7DC,mBACEjG,EAGX6D,wBAAyBW,eAAeT,cAAa,kBAAmBiC,MAAK,GAE7EnC,qBAAqBuB,QACZZ,eAAec,iBAAgB,UAAS,SAAWI,GACpDA,EAAEQ,iBACFd,eCVNe,EAAkB/F,eAAkBC,EAAWT,EAAYM,cAGzD4E,EAAasB,gBAEbxG,EAAYI,MAAK,IAAOqG,gBAAgBC,SAASC,QAAQC,IAAG,WAC5D5G,EAAYI,YAENG,EAAiBE,GAEvByE,EAAa2B,OAAO7G,EAAYC,MAEhC0F,EAAekB,OAAO7G,SAEjBsB,GACFA,EAAM0D,QAAO,kBACZ1D,EAAM0D,QAAO,2DACjBE,EAAaX,YAAYjD,EAAM0D,WAIjC8B,EAAgBtG,uBACZJ,EAAQ+F,EAAWY,WACrB3G,IACJJ,EAAYI,MAAQA,EACpBmG,EAAmBvG,EAAYM,YAI/B4E,EAAa8B,sBAAsBT,GACnCZ,EAAesB,yBAAyBV,GACxCJ,EAAWe,qBAAqBJ","sources":["node_modules/@parcel/runtime-js/lib/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-1792a1e07b339732b1567aeba58d9b5d.js","src/js/models/overviewModel.js","src/js/config.js","src/js/helpers.js","node_modules/@parcel/runtime-js/lib/bundle-url.js","node_modules/@parcel/runtime-js/lib/relative-path.js","node_modules/@parcel/runtime-js/lib/runtime-801a85296e4f9056950fa807e1589e1d.js","src/js/views/view.js","src/js/views/overviewView.js","src/js/views/paginationView.js","src/js/views/searchView.js","src/js/controllers/overviewController.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./bundle-manifest').register(JSON.parse(\"{\\\"75nrA\\\":\\\"home.HASH_REF_e8d91f3ec6fdd665107d8612c984920a.js\\\",\\\"6MDiI\\\":\\\"cerrar.HASH_REF_deea2576e315258d49cfcc3ffcb2d3a4.svg\\\"}\"));","import { API_URL, TOTAL_RESULTS } from \"../config.js\";\r\nimport { getJSON } from \"../helpers.js\";\r\n\r\nexport const state = {\r\n    hits: [],\r\n    totalHits: 0,\r\n    totalResult: TOTAL_RESULTS,\r\n    query: \"\",\r\n    page: 1,\r\n    initPage: 1,\r\n};\r\n\r\nexport const loadImages = async function(goToPage = state.initPage) {\r\n    try {\r\n        let url = `${API_URL}&page=${goToPage}`;\r\n        if(state.query) url = `${url}&q=\"${state.query}\"`;\r\n        const data = await getJSON(url);\r\n        if(data.totalHits === 0) throw new Error(\"No results found, please try another name\");\r\n        state.hits = data.hits;\r\n        state.totalHits = data.totalHits;\r\n        state.page = parseInt( Math.ceil( state.totalHits / state.totalResult ) );\r\n    } catch (error) { throw error; }\r\n};\r\n\r\n","export const API_URL = \"https://pixabay.com/api/?key=17167571-d840cd320f8aaa6d4b36831e4\";\r\nexport const TIMEOUT_SEC = 10;\r\nexport const TOTAL_RESULTS = 20;","import { TIMEOUT_SEC } from './config.js';\r\nexport const timeout = function(s) {\r\n    return new Promise(function(_, reject) {\r\n        setTimeout(() => {\r\n            reject(new Error(`Request took too long! Timeout after ${s} second`));\r\n        }, s * 1000);\r\n    });\r\n};\r\n\r\nexport const getJSON = async function(url) {\r\n    try {\r\n        const res = await Promise.race([fetch(url), timeout(TIMEOUT_SEC)]);\r\n        const data = await res.json();\r\n        if(!res.ok) throw new Error(\"no results found! Please try again\");\r\n        return data;\r\n    } catch (error) { \r\n        throw error; \r\n    }\r\n};","\"use strict\";\n\n/* globals document:readonly */\nvar bundleURL = null;\n\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  let matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","\"use strict\";\n\nvar resolve = require('./bundle-manifest').resolve;\n\nmodule.exports = function (fromId, toId) {\n  return relative(dirname(resolve(fromId)), resolve(toId));\n};\n\nfunction dirname(_filePath) {\n  if (_filePath === '') {\n    return '.';\n  }\n\n  var filePath = _filePath[_filePath.length - 1] === '/' ? _filePath.slice(0, _filePath.length - 1) : _filePath;\n  var slashIndex = filePath.lastIndexOf('/');\n  return slashIndex === -1 ? '.' : filePath.slice(0, slashIndex);\n}\n\nfunction relative(from, to) {\n  if (from === to) {\n    return '';\n  }\n\n  var fromParts = from.split('/');\n\n  if (fromParts[0] === '.') {\n    fromParts.shift();\n  }\n\n  var toParts = to.split('/');\n\n  if (toParts[0] === '.') {\n    toParts.shift();\n  } // Find where path segments diverge.\n\n\n  var i;\n  var divergeIndex;\n\n  for (i = 0; (i < toParts.length || i < fromParts.length) && divergeIndex == null; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      divergeIndex = i;\n    }\n  } // If there are segments from \"from\" beyond the point of divergence,\n  // return back up the path to that point using \"..\".\n\n\n  var parts = [];\n\n  for (i = 0; i < fromParts.length - divergeIndex; i++) {\n    parts.push('..');\n  } // If there are segments from \"to\" beyond the point of divergence,\n  // continue using the remaining segments.\n\n\n  if (toParts.length > divergeIndex) {\n    parts.push.apply(parts, toParts.slice(divergeIndex));\n  }\n\n  return parts.join('/');\n}\n\nmodule.exports._dirname = dirname;\nmodule.exports._relative = relative;","module.exports = require('./bundle-url').getBundleURL() + require('./relative-path')(\"75nrA\", \"6MDiI\")","import cerrar from 'url:../../images/cerrar.svg';\r\nclass View {\r\n    _component = document.querySelector('.component');\r\n    message = \"It seems that an error has occurred! Please please try again\";\r\n    _data;\r\n\r\n    render(data){\r\n      if(!data || Array.isArray(data) && data.length === 0 ) return this.renderError();\r\n        this._data = data;\r\n        const markup = this._generateMarkup();\r\n        this._clear();\r\n        this._parentElement.insertAdjacentHTML('afterbegin', markup);\r\n    }\r\n\r\n    _clear(){ \r\n      this._parentElement.innerHTML = \"\"; \r\n      this._component.innerHTML = \"\";\r\n    }\r\n\r\n    renderSpinner(){\r\n        const markup = `\r\n        <div class=\"lds-ring\"><div></div><div></div><div></div><div>\r\n        `;\r\n        this._clear();\r\n        this._component.insertAdjacentHTML('afterbegin', markup);\r\n    };\r\n\r\n    renderError(message = this.message){\r\n       const markup = `\r\n        <div class=\"error\">\r\n          <div>\r\n            <img src=\"${cerrar}\" alt=\"error\" />\r\n          </div>\r\n          <h1>${message}</h1>\r\n        </div>\r\n       `;\r\n       this._clear();\r\n       this._component.insertAdjacentHTML('afterbegin', markup);\r\n    }\r\n\r\n};\r\n\r\nexport default View;","import view from \"./view.js\";\r\nclass OverviewView extends view {\r\n    _parentElement = document.querySelector('.overview');\r\n\r\n    _generateMarkup(){\r\n        return this._data.map(this._generateMarkupImages).join('');\r\n    }\r\n\r\n    _generateMarkupImages(image){\r\n        return `\r\n            <div class=\"overview__item\">\r\n                <a href=\"/preview.html/?id=${image.id}\">\r\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\r\n                </a>\r\n                <h2>${image.tags}</h2>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    addHandleLoadOverview(handle){ window.addEventListener('load', handle); }\r\n\r\n};\r\n\r\nexport default new OverviewView();","import view from \"./view.js\";\r\nclass PaginationView extends view {\r\n    _parentElement = document.querySelector('.pagination');\r\n \r\n    _generateMarkup(){\r\n        let html = \"\";\r\n        for(let i=1; i<=this._data.page; ++i){\r\n            html += this._generateButtonsMarkup(i);\r\n        }\r\n        return html;\r\n    }\r\n\r\n    _generateButtonsMarkup(page){\r\n        return `\r\n            <button data-page=\"${page}\" class=\"btn btn--pagination\">\r\n                ${page} \r\n            </button>\r\n        `;\r\n    }\r\n\r\n    addHandleClickPagination(handle){\r\n        this._parentElement.addEventListener('click', function(e) {\r\n            const btn =  e.target.closest('.btn');\r\n            if(!btn) return;\r\n            handle(+btn.dataset.page);\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport default new PaginationView();","import view from \"./view.js\";\r\n\r\nclass SearchView extends view {\r\n    _parentElement = document.querySelector('.search');\r\n    message = \"No results found, please try another name\";\r\n\r\n    getQuery(){\r\n        const query = this._parentElement.querySelector('.search__input').value;\r\n        this._clearInputValue();\r\n        return query;\r\n    }\r\n\r\n    _clearInputValue(){ this._parentElement.querySelector('.search__input').value = \"\"; }\r\n\r\n    addHandleSearchClick(handle){\r\n        this._parentElement.addEventListener('submit', function(e) {\r\n            e.preventDefault();\r\n            handle();\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport default new SearchView();","import * as model from '../models/overviewModel.js';\r\nimport overviewView from '../views/overviewView.js';\r\nimport paginationView from '../views/paginationView.js';\r\nimport searchView from '../views/searchView.js';\r\n\r\nif(module.hot){ module.hot.accept(); }\r\n\r\nconst controllerOverview = async function(goToPage = model.state.initPage) {\r\n    try {\r\n        // loading...\r\n        overviewView.renderSpinner();\r\n        // get params search\r\n        model.state.query = new URLSearchParams(location.search).get(\"search\") || \r\n        model.state.query;\r\n        // get results\r\n        await model.loadImages(goToPage);\r\n        // render results\r\n        overviewView.render(model.state.hits);\r\n        // render pagination\r\n        paginationView.render(model.state);\r\n        \r\n    } catch (error) {\r\n        if(error.message = \"Failed to fetch\") \r\n            error.message = \"An unexpected error has occurred! Please reload the page\";\r\n        overviewView.renderError(error.message);\r\n     }\r\n};\r\n\r\nconst controllerSearch = async function() {\r\n    const query = searchView.getQuery();\r\n    if(!query) return ;\r\n    model.state.query = query;\r\n    controllerOverview(model.state.initPage);\r\n}\r\n\r\nconst init = function() {\r\n    overviewView.addHandleLoadOverview(controllerOverview);\r\n    paginationView.addHandleClickPagination(controllerOverview);\r\n    searchView.addHandleSearchClick(controllerSearch);\r\n}\r\ninit();"],"names":["$7d806a7a603c235ec027b73d847f4d95$var$mapping","$7d806a7a603c235ec027b73d847f4d95$export$357eb1b4f03c1402","pairs","keys","Object","i","length","$7d806a7a603c235ec027b73d847f4d95$export$40339995e8a21591","id","resolved","Error","parcelRequire","register","JSON","parse","$1b558256bcff764c5dd9cd8dc36f356b$export$c837a8b98c265ae3","hits","totalHits","totalResult","query","page","initPage","$1b558256bcff764c5dd9cd8dc36f356b$export$562ecab60b8c40eb","async","goToPage","url","data","res","Promise","race","fetch","s","_","reject","setTimeout","json","ok","error","$37f17f2cfa7c1f359151dec56797b63a$export$578f55a5d60842ba","parseInt","Math","ceil","$634f916bc30b7d6650877f3f4b6a8b3a$var$bundleURL","$634f916bc30b7d6650877f3f4b6a8b3a$var$getBaseURL","replace","$634f916bc30b7d6650877f3f4b6a8b3a$export$da289beea9c5b10d","err","matches","stack","match","$634f916bc30b7d6650877f3f4b6a8b3a$var$getBundleURL","resolve","$824bc590bf0a3702ac7bd27152cb0639$var$dirname","_filePath","filePath","slice","slashIndex","lastIndexOf","$824bc590bf0a3702ac7bd27152cb0639$var$relative","from","to","fromParts","split","shift","divergeIndex","toParts","parts","push","apply","join","module","exports","fromId","toId","$824bc590bf0a3702ac7bd27152cb0639$require$resolve","_dirname","_relative","$b86d9df77412fd1f9352e18e2b892d12$exports","getBundleURL","$90a9ec88b0022664e8fac599ef413374$export$9099ad97b570f7c","[object Object]","document","querySelector","Array","isArray","this","renderError","_data","markup","_generateMarkup","_clear","_parentElement","insertAdjacentHTML","innerHTML","_component","message","$parcel$interopDefault","$04216ae893bb9d75fdcd5ed11b682854$export$9099ad97b570f7c","map","_generateMarkupImages","image","webformatURL","tags","handle","window","addEventListener","$8db8bfebfc49a3194a2851793fbaa707$export$9099ad97b570f7c","html","_generateButtonsMarkup","e","btn","target","closest","dataset","$df7046c04f597bc3ca70999db58035f3$export$9099ad97b570f7c","value","_clearInputValue","preventDefault","$f74b485c5fda437061c3ba3e20c5dff2$var$controllerOverview","renderSpinner","URLSearchParams","location","search","get","render","$f74b485c5fda437061c3ba3e20c5dff2$var$controllerSearch","getQuery","addHandleLoadOverview","addHandleClickPagination","addHandleSearchClick"],"version":3,"file":"home.HASH_REF_e8d91f3ec6fdd665107d8612c984920a.js.map"}