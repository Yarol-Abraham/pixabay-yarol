var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
var _overviewModelJs = require("../models/overviewModel.js");
var _overviewViewJs = require("../views/overviewView.js");
var _overviewViewJsDefault = parcelHelpers.interopDefault(_overviewViewJs);
var _paginationViewJs = require("../views/paginationView.js");
var _paginationViewJsDefault = parcelHelpers.interopDefault(_paginationViewJs);
var _searchViewJs = require("../views/searchView.js");
var _searchViewJsDefault = parcelHelpers.interopDefault(_searchViewJs);
if (module.hot) module.hot.accept();
const controllerOverview = async function(goToPage = _overviewModelJs.state.initPage) {
    try {
        // loading...
        _overviewViewJsDefault.default.renderSpinner();
        // get results
        await _overviewModelJs.loadImages(goToPage);
        // render results
        _overviewViewJsDefault.default.render(_overviewModelJs.state.hits);
        // render pagination
        _paginationViewJsDefault.default.render(_overviewModelJs.state);
    } catch (error) {
        error.message = "Failed to fetch";
        error.message = "An unexpected error has occurred! Please reload the page";
        _overviewViewJsDefault.default.renderError(error.message);
    }
};
const controllerSearch = async function() {
    const query = _searchViewJsDefault.default.getQuery();
    if (!query) return;
    _overviewModelJs.state.query = query;
    controllerOverview(_overviewModelJs.state.initPage);
};
const init = function() {
    _overviewViewJsDefault.default.addHandleLoadOverview(controllerOverview);
    _paginationViewJsDefault.default.addHandleClickPagination(controllerOverview);
    _searchViewJsDefault.default.addHandleSearchClick(controllerSearch);
};
init();
