!function(){function e(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}function r(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequire6662;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){let r=a[e];delete a[e];let t={id:e,exports:{}};return n[e]=t,r.call(t.exports,t,t.exports),t.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,r){a[e]=r},t.parcelRequire6662=i),i.register("3OOJ5",(function(r,t){var n,a;e(r.exports,"resolve",(()=>a),(e=>a=e)),e(r.exports,"register",(()=>n),(e=>n=e));var i={};n=function(e){for(var r=Object.keys(e),t=0;t<r.length;t++)i[r[t]]=e[r[t]]},a=function(e){var r=i[e];if(null==r)throw new Error("Could not resolve bundle with id "+e);return r}})),i("3OOJ5").register(JSON.parse('{"ZWsfK":"preview.HASH_REF_20d399794d35dd7156904112d78cebb8.js","6MDiI":"cerrar.HASH_REF_deea2576e315258d49cfcc3ffcb2d3a4.svg"}'));const s="https://pixabay.com/api/?key=17167571-d840cd320f8aaa6d4b36831e4",o=async function(e){try{const t=await Promise.race([fetch(e),(r=10,new Promise((function(e,t){setTimeout((()=>{t(new Error(`Request took too long! Timeout after ${r} second`))}),1e3*r)})))]),n=await t.json();if(!t.ok)throw new Error("no results found! Please try again");return n}catch(e){throw e}var r},c={data:{},tags:[],relations:[]};var l;i.register("31oBo",(function(r,t){var n;e(r.exports,"getBundleURL",(()=>n),(e=>n=e));var a=null;function i(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(){return a||(a=function(){try{throw new Error}catch(r){var e=(""+r.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return i(e[0])}return"/"}()),a}})),i.register("3XRD4",(function(e,r){"use strict";var t=i("3OOJ5").resolve;function n(e){if(""===e)return".";var r="/"===e[e.length-1]?e.slice(0,e.length-1):e,t=r.lastIndexOf("/");return-1===t?".":r.slice(0,t)}function a(e,r){if(e===r)return"";var t=e.split("/");"."===t[0]&&t.shift();var n,a,i=r.split("/");for("."===i[0]&&i.shift(),n=0;(n<i.length||n<t.length)&&null==a;n++)t[n]!==i[n]&&(a=n);var s=[];for(n=0;n<t.length-a;n++)s.push("..");return i.length>a&&s.push.apply(s,i.slice(a)),s.join("/")}e.exports=function(e,r){return a(n(t(e)),t(r))},e.exports._dirname=n,e.exports._relative=a})),l=i("31oBo").getBundleURL()+i("3XRD4")("ZWsfK","6MDiI");var d=class{_component=document.querySelector(".component");message="It seems that an error has occurred! Please please try again";_data;render(e){if(!e||Array.isArray(e)&&0===e.length)return this.renderError();this._data=e;const r=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",r)}_clear(){this._parentElement.innerHTML="",this._component.innerHTML=""}renderSpinner(){this._clear(),this._component.insertAdjacentHTML("afterbegin",'\n        <div class="lds-ring"><div></div><div></div><div></div><div>\n        ')}renderError(e=this.message){const t=`\n        <div class="error">\n          <div>\n            <img src="${r(l)}" alt="error" />\n          </div>\n          <h1>${e}</h1>\n        </div>\n       `;this._clear(),this._component.insertAdjacentHTML("afterbegin",t)}};var u=new class extends d{_parentElement=document.querySelector(".preview");_generateMarkup(){const{data:e,relations:{hits:r}}=this._data;return`\n        <div class="preview__image" >\n            <h1>${e.tags}</h1>\n            <img src="${e.largeImageURL}", alt="${e.tags}" />\n        </div>\n        <div class="preview__content">\n            <div class="preview__user">\n                <img src="${e.userImageURL}", alt="${e.user}" />\n                <a \n                    href="https://pixabay.com/users/${e.user}-${e.user_id}"\n                    target="_blank"    \n                >\n                    ${e.user}\n                </a>\n            </div>\n            <div class="preview__download">\n                <p>Free for commercial use, No attribution required</p>\n                <a href="${e.pageURL}" target="_blank" >Free Download</a>\n            </div>\n            <div class="preview__related--box">\n                <h1> Related Images </h1>\n                ${r.map(this._generateRelationsMarkup).join("")}\n            </div>\n        </div>\n       `}_generateRelationsMarkup(e){return`\n            <div class="relate--image">\n                <a href="/preview.html/?id=${e.id} ">\n                    <img src="${e.webformatURL}" />\n                </a>\n            </div>\n        `}addHandleLoadPreview(e){window.addEventListener("load",e)}};var h=new class extends d{_parentElement=document.querySelector(".search");message="No results found, please try another name";getQuery(){const e=this._parentElement.querySelector(".search__input").value;return this._clearInputValue(),e}_clearInputValue(){this._parentElement.querySelector(".search__input").value=""}addHandleSearchClick(e){this._parentElement.addEventListener("submit",(function(r){r.preventDefault(),e()}))}};const p=async function(){try{u.renderSpinner();const e=new URLSearchParams(location.search).get("id");if(!e)throw new Error("No results found :(");await async function(e){try{const r=await o(`${s}&id=${e}`);c.data=r.hits[0],c.tags=c.data.tags.split(",")}catch(e){throw e}}(e),await async function(){try{const e=c.tags.map((e=>e)).join(""),r=await o(`${s}&q=${e}&per_page=3`);c.relations=r}catch(e){throw e}}(),u.render(c)}catch(e){u.renderError(e.message)}},f=function(){const e=h.getQuery();e&&window.location.replace(`/home.html/?search=${e}`)};h.addHandleSearchClick(f),u.addHandleLoadPreview(p)}();
//# sourceMappingURL=preview.HASH_REF_20d399794d35dd7156904112d78cebb8.js.map
